- type: custom-api
  title: SABnzbd Status
  cache: 30s
  url: ${SABNZBD_URL}/api?output=json&apikey=${SABNZBD_API_KEY}&mode=queue
  headers:
    Accept: application/json
  template: |
    <div class="p-2">
      <div class="flex justify-between mb-2">
        <div class="flex-1">
          <div class="size-h6">SPEED</div>
          <div class="color-highlight size-h3">{{ if eq (.JSON.String "queue.status") "Downloading" }}{{ .JSON.String "queue.speed" }}B/s{{ else }}Paused{{ end }}</div>
        </div>
        <div class="flex-1">
          <div class="size-h6">TIME LEFT</div>
          <div class="color-highlight size-h3">{{ if eq (.JSON.String "queue.status") "Downloading" }}{{ .JSON.String "queue.timeleft" }}{{ else }}--:--:--{{ end }}</div>
        </div>
      </div>
      <div class="flex justify-between mb-2">
        <div class="flex-1">
          <div class="size-h6">QUEUE</div>
          <div class="color-highlight size-h3">{{ .JSON.Int "queue.noofslots" }} items</div>
        </div>
        <div class="flex-1">
          <div class="size-h6">SIZE</div>
          <div class="color-highlight size-h3">{{ .JSON.Float "queue.mb" | printf "%.1f" }}MB</div>
        </div>
      </div>
    </div>

- type: custom-api
  title: Sonarr Calendar
  cache: 5m
  url: ${SONARR_URL}/api/v3/calendar?start={{ .Date.StartOfToday }}&end={{ (.Date.StartOfToday.Add (336 * .Date.Hour)) }}&unmonitored=false
  headers:
    X-Api-Key: ${SONARR_API_KEY}
  template: |
    <div class="p-2">
      <div class="size-h5">Upcoming Episodes (14 days)</div>
      {{ range .JSON.Array "" }}
        <div class="flex items-center mb-1 border-b pb-1">
          <div class="flex-1">
            <div class="size-h6 color-highlight">{{ .String "series.title" }}</div>
            <div class="size-h7">S{{ .Int "seasonNumber" }}E{{ .Int "episodeNumber" }} - {{ .String "title" }}</div>
            <div class="size-h8 color-subdue">{{ (.Get "airDate").Time.Format "Jan 02, 2006" }}</div>
          </div>
        </div>
      {{ end }}
    </div>

- type: custom-api
  title: Radarr Calendar
  cache: 5m
  url: ${RADARR_URL}/api/v3/calendar?start={{ .Date.StartOfToday }}&end={{ (.Date.StartOfToday.Add (336 * .Date.Hour)) }}&unmonitored=false
  headers:
    X-Api-Key: ${RADARR_API_KEY}
  template: |
    <div class="p-2">
      <div class="size-h5">Upcoming Movies (14 days)</div>
      {{ range .JSON.Array "" }}
        <div class="flex items-center mb-1 border-b pb-1">
          <div class="flex-1">
            <div class="size-h6 color-highlight">{{ .String "title" }}</div>
            <div class="size-h7">{{ .String "studio" }}</div>
            <div class="size-h8 color-subdue">{{ if .Get "inCinemas" }}{{ (.Get "inCinemas").Time.Format "Jan 02, 2006" }}{{ else }}TBA{{ end }}</div>
          </div>
        </div>
      {{ end }}
    </div>
