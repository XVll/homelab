- type: custom-api
  title: Proxmox VMs
  cache: 30s
  url: https://${PROXMOX_HOST}:8006/api2/json/cluster/resources?type=vm
  allow-insecure: true
  headers:
    Authorization: PVEAPIToken=${PROXMOX_TOKEN_ID}=${PROXMOX_TOKEN_SECRET}
  template: |
    <div class="p-2">
      <div class="size-h5">Virtual Machines ({{ len (.JSON.Array "data") }})</div>
      {{ range (.JSON.Array "data") }}
        {{ if ne (.Int "template") 1 }}
          <div class="flex items-center mb-1 border-b pb-1">
            <div class="flex-1">
              <div class="size-h6 color-highlight">{{ .String "name" }} ({{ .Int "vmid" }})</div>
              <div class="size-h7">
                {{ if eq (.String "status") "running" }}
                  ✓ Running • CPU: {{ mul (.Float "cpu") 100 | printf "%.1f" }}% • RAM: {{ div (.Float "mem") 1073741824 | printf "%.1f" }}GB/{{ div (.Float "maxmem") 1073741824 | printf "%.0f" }}GB
                {{ else }}
                  ⏸ Stopped
                {{ end }}
              </div>
            </div>
          </div>
        {{ end }}
      {{ end }}
    </div>

- type: dns-stats
  title: AdGuard Home
  cache: 5m
  service: adguard
  url: ${ADGUARD_URL}
  username: ${ADGUARD_USERNAME}
  password: ${ADGUARD_PASSWORD}
  hour-format: 24h

- type: server-stats
  title: Observability VM
  cache: 30s
  servers:
    - type: local
      name: observability (112)
      hide-swap: false

- type: docker-containers
  title: Local Containers
  cache: 30s
  running-only: false

- type: releases
  title: Infrastructure Releases
  cache: 1h
  limit: 5
  collapse-after: 3
  show-source-icon: true
  repositories:
    - glanceapp/glance
    - portainer/portainer
    - grafana/grafana
    - grafana/loki
    - grafana/alloy
    - traefik/traefik
