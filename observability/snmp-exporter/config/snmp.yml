# ============================================================================
# SNMP Exporter Configuration for Synology NAS
# ============================================================================
# Compatible with standalone Prometheus SNMP Exporter
# Provides standard system metrics that match node_exporter naming patterns
# ============================================================================

auths:
  homelab_v2:
    community: homelab
    version: 2
    security_level: noAuthNoPriv
    auth_protocol: MD5
    priv_protocol: DES

modules:
  synology:
    walk:
      # System - SNMPv2-MIB
      - 1.3.6.1.2.1.1               # system (sysDescr, sysUpTime, sysName)

      # CPU & Load - UCD-SNMP-MIB
      - 1.3.6.1.4.1.2021.10.1       # laLoad (load averages)
      - 1.3.6.1.4.1.2021.11         # ssCpu (CPU metrics)

      # Memory - UCD-SNMP-MIB
      - 1.3.6.1.4.1.2021.4          # memory (total, available, swap, buffers, cached)

      # Network - IF-MIB
      - 1.3.6.1.2.1.2.2.1           # ifTable (basic interface info)
      - 1.3.6.1.2.1.31.1.1          # ifXTable (64-bit counters)

      # Disk/Storage - HOST-RESOURCES-MIB
      - 1.3.6.1.2.1.25.2.3          # hrStorage (storage descriptions, sizes, used)

      # Disk I/O - UCD-SNMP-MIB
      - 1.3.6.1.4.1.2021.13.15.1    # diskIO (reads, writes, bytes)

      # Synology-specific MIBs
      - 1.3.6.1.4.1.6574.1          # synoSystem (system status, temp, fan)
      - 1.3.6.1.4.1.6574.2          # synoDisk (disk health and status)
      - 1.3.6.1.4.1.6574.3          # synoRaid (RAID status)

    # Metric overrides for better naming
    overrides:
      # System
      sysUpTime:
        type: gauge

      # Load averages
      laLoad:
        type: gauge
        regex_extracts:
          "":
            - regex: '(\d+\.\d+)'
              value: '$1'

      # CPU - convert to percentages
      ssCpuRawUser:
        type: counter
      ssCpuRawNice:
        type: counter
      ssCpuRawSystem:
        type: counter
      ssCpuRawIdle:
        type: counter
      ssCpuRawWait:
        type: counter

      # Memory - in kB
      memTotalReal:
        type: gauge
      memAvailReal:
        type: gauge
      memTotalSwap:
        type: gauge
      memAvailSwap:
        type: gauge
      memBuffer:
        type: gauge
      memCached:
        type: gauge

      # Network interfaces
      ifHCInOctets:
        type: counter
      ifHCOutOctets:
        type: counter
      ifOperStatus:
        type: gauge
      ifName:
        type: DisplayString

      # Storage
      hrStorageSize:
        type: gauge
      hrStorageUsed:
        type: gauge
      hrStorageDescr:
        type: DisplayString

      # Disk I/O
      diskIOReads:
        type: counter
      diskIOWrites:
        type: counter
      diskIODevice:
        type: DisplayString

      # Synology-specific
      diskTemperature:
        type: gauge
      diskStatus:
        type: gauge
      raidStatus:
        type: gauge
